txn GroupIndex
int 0
==

txn TypeEnum
int 1
==

txn Fee
int TMPL_FEE
<

txn CloseRemainderTo
addr TMPL_OWN
==

global GroupSize
int 3
<

global GroupSize
int 1
==

bnz label6

txn Amount
int TMPL_MINTRD
>

gtxn 1 TypeEnum
int 4 // AssetTransfer
==
&&

gtxn 1 XferAsset
int TMPL_ASSET
==
&&

gtxn 1 AssetReceiver
addr TMPL_OWN
==
&&

gtxn 1 AssetSender
global ZeroAddress
==
&&

int TMPL_SWAPN
txn Amount
*
int TMPL_SWAPD
gtxn 1 AssetAmount
*
< // (txn.Amount * numerator) < (gtxn[1].AssetAmount * denomenator)
&& // (Amount > min) && is AssetTransfer && is desired asset type && AssetReceiver is me && (asset sender disabled, not a clawback operation) && ratio ok

//&&
//&&
//&&
//&&

int 1
bnz label7
pop // check bug workaround

label6:
txn FirstValid
int TMPL_TIMEOUT
>

txn Receiver
global ZeroAddress
==
&&

txn Amount
int 0
==
&& // (txn.FirstValid > timeout) and no Receiver and 0 Amount

label7:
&&
&&
&&
&&
&&